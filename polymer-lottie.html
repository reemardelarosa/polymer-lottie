<link rel="import" href="../polymer/polymer-element.html">
<link rel="import" href="../bodymovin/build//player/lottie.js">

<dom-module id="polymer-lottie">
  <template>
    <style>
      :host {
        display: inline-block;
        overflow: hidden;
        margin: 0 auto;
      }
    </style>
  </template>

  <script>
    /**
     * `polymer-lottie`
     * 
     *
     * @customElement
     * @polymer
     * @demo demo/index.html
     */
    class PolymerLottie extends Polymer.Element {

      static get is() { return 'polymer-lottie'; }

      static get properties() {
        return {
          animationData: {
            type: Object
          },
          autoPlay: {
            type: Boolean,
            value: false
          },
          container: {
            type: Object
          },
          loop: {
            type: Boolean,
            value: false
          },
          loading: {
            type: Boolean,
            value: false
          },
          loaded: {
            type: Boolean,
            value: false
          },
          renderer: {
            type: String,
            value: 'svg'
          },
          rendererSettings: {
            type: Object,
            value: {}
          },
          segments: {
            type: Boolean,
            value: false
          }
        };
      }

      ready() {
        super.ready();

        this._initializeLottie();
      }

      _initializeLottie() {
        let options = {
          container: this.container,
          renderer: this.renderer,
          loop: this.loop,
          autoplay: this.autoplay,
          animationData: this.animationData,
          path: this.path,
          rendererSettings: this.rendererSettings
        };

        this.anim = lottie.loadAnimation(options);
      }

      play() {
        this.anim.play();
      }

      stop() {
        this.anim.stop();
      }

      pause() {
        this.anim.pause();
      }
    }

    window.customElements.define(PolymerLottie.is, PolymerLottie);
  </script>
</dom-module>
